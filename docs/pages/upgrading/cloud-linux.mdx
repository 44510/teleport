---
title: Manually Upgrade Teleport Cloud Agents on Linux
description: Provides instructions for upgrading Teleport Cloud agents that run on Linux servers. 
---

This guide explains how to upgrade Teleport Cloud agents running on Linux servers.

[Automatic updates](./cloud-linux-automatic.mdx) is the recommended update method
for Teleport agents. If you choose to opt out of automatic updates, you will need
to be responsible for keeping your Teleport agents up to date with the version of
Teleport Cloud.

## Prerequisites

- Familiarity with the [Upgrading Compatibility Overview](./overview.mdx) guide,
  which describes the sequence in which to upgrade components in your cluster.

- (!docs/pages/includes/cloud/tctl-tsh-prerequisite.mdx!)

- (!docs/pages/includes/tctl.mdx!)

## Step 1/2. Check for agent updates

The latest compatible Teleport agent version is served by the Teleport Proxy. To
identify what that version is, you can query the `webapi` endpoint.

```code
$ curl https://<Var name="teleport.example.com" />/webapi/automaticupgrades/channel/stable/cloud/version
v15.2.1
```

Use the `tctl inventory ls` command to list connected agents along with their current
version. Use the `--older-than` flag to list agents that are upgradable.

```code
$ tctl inventory ls --older-than=v15.2.1
Server ID                            Hostname       Services       Version Upgrader
------------------------------------ -------------- -------------- ------- --------
00000000-0000-0000-0000-000000000000 ip-10-1-6-130  Node           v14.4.5 none
00000000-0000-0000-0000-000000000001 teleport-proxy Proxy          v15.2.0 none
00000000-0000-0000-0000-000000000002 teleport-auth  Auth,Discovery v15.2.0 none
...
```

Note that the `inventory ls` command will also list `teleport-auth` and `teleport-proxy`
services. These services are managed by the Teleport Cloud team and updates will
be performed automatically.

## Step 2/2. Perform manual updates

For each agent ID returned by the `tctl inventory ls` command, copy the ID and
run the following `tctl` command to access the host via `tsh`:

```code
$ HOST=00000000-0000-0000-0000-000000000000
$ USER=root
$ tsh ssh "${USER?}@${HOST?}"
```

(!docs/pages/includes/install-linux-ent-self-hosted.mdx!)

(!docs/pages/includes/repo-channels.mdx!)
