---
title: Access Requests with Jira Projects
description: Describes how to integrate Teleport access requests with Jira project workflows.
---

This guide describes how to integrate Teleport access requests into Jira project workflow. 
With this integration, you can use Jira tickets to approve or deny Teleport access requests.

## Prerequisites

(!docs/pages/includes/commercial-prereqs-tabs.mdx!)

- Jira Server or Jira Cloud installation with permission to configure webhooks, 
  issue types, and workflows.
- (!docs/pages/includes/tctl.mdx!)

## Step 1/6. Create a user and role for access

(!docs/pages/includes/plugins/rbac-update.mdx!)

## Step 2/6. Export the access plugin certificate

(!docs/pages/includes/plugins/identity-export.mdx user="access-plugin"!)

We'll reference these files later when configuring the plugin.

## Step 3/6. Create a Jira project for access requests

The Teleport access request plugin for Jira sends access requests to the project you specify. 
In general, you should create a separate project for managing the Teleport access requests, and 
set up a new project board for these requests.

Follow the instructions in the Jira documentation to add a new project for Teleport access 
requests and note the project key. You'll need the project key to configure the plugin.

After creating the project, create a new project board for managing access requests in the project. 
You should create a board that has at least the following three columns:

- Pending
- Approved
- Denied

The Teleport access request plugin for Jira plugin automativelly creates a new issue for each 
new access request in the first available column on the project board. You can then drag the 
request task to the **Approved** column to approve the request or to the **Denied** column 
to deny the request.

### Get a Jira API token

If you're using Jira Cloud, navigate to Account Settings, click **Security**, then select
[**API Tokens**](https://id.atlassian.com/manage-profile/security/api-tokens).
Create a new app-specific API token in your Jira installation. 
You'll need this token later to configure the plugin.

If you are using Jira Server, navigate to the URL for the **API Tokens** page.
This URL depends on where you have installed Jira.

### Set up Jira webhooks

Go to Settings → General → System → Webhooks.
Create a new webhook for Jira to tell the Teleport plugin about updates.

For the webhook URL, use the URL that you'll run the plugin on. The URL must be a publicly 
accessible URL. Jira requires the webhook listener to run over HTTPS.

The webhook needs to be notified only about new issues being created, issues being 
updated, or deleted. You can leave all the other boxes empty.

Jira will send updates about any issues in any projects to the webhook.
You can use JQL filters to limit which issues are being sent to the Teleport plugin.

The plugin's web server will run with TLS, but you can disable it with `--insecure-no-tls` 
to test things out in a dev environment.

In the webhook settings page, make sure that the webhook will only send Issue Updated 
updates. It's not critical if anything else gets sent. The plugin ignores everything else.

## Step 4/6. Install the plugin

(!docs/pages/includes/plugins/install-access-request.mdx name="jira"!)

## Step 5/6. Configure the plugin

Depending on whether you are running the plugin as an executable in a
non-containerized environment or on Kubernetes, follow the appropriate
instructions for your environment to configure the plugin: 

<Tabs>
<TabItem 
label="Executable" 
>

The Teleport Jira plugin uses a configuration file in TOML format. Generate a
boilerplate configuration by running the following command:

```code
$ teleport-jira configure > teleport-jira.toml
$ sudo mv teleport-jira.toml /etc
```

By default, the Teleport access request plugin uses the configuration in
the `/etc/teleport-jira.toml` file. You can override the default by using
the `-c <config-file-path>.toml` command-line option.

The configuration file should resemble the following:

```toml
(!examples/resources/plugins/teleport-jira-cloud.toml!)
```
</TabItem>
<TabItem 
label="Helm Chart" 
>

Create a file called `values.yaml` with the following content to configure
the Helm chart for the plugin. It should resemble the following:

```yaml
(!examples/resources/plugins/teleport-jira-helm-cloud.yaml!)
```

Use the following command to create the Kubernetes secret referenced in the
values file from the identity file you generated earlier:

```console
kubectl create secret generic teleport-plugin-jira-identity --from-file=auth_id=auth.pem
```
</TabItem>
</Tabs>

The `[teleport]` sections includes configuration options for connecting the Jira
plugin to Teleport.

The `[jira]` section requires a few things:

- Your Jira Cloud or Jira Server URL. For Jira Cloud, it looks something like `yourcompany.atlassian.net`.
- Your username on Jira, i.e. [ben@goteleport.com](mailto:ben@goteleport.com)
- Your Jira API token that you've created above.
- A Jira Project key, available in Project settings.

The `[http]` setting block describes how the plugin's HTTP server works. 
The HTTP server is responsible for listening for updates from Jira, and processing updates, 
like when someone drags a task from Inbox to Approved column.

You must provide an address the server should listen on, and a certificate to use. 
It's possible to run the Jira plugin on the same server as the Teleport Proxy Service, so 
you can use the same TLS certificate.

## Step 6/6. Test the plugin

You should be able to run the Teleport plugin now!

<Tabs>
<TabItem label="Executable" scopes={["oss", "enterprise", "cloud"]}>
```code
$ teleport-jira start
```
</TabItem>
<TabItem label="Docker">
Run the plugin:

```code
$ docker run -v <path-to-config>:/etc/teleport-jira.toml public.ecr.aws/gravitational/teleport-plugin-jira:(=teleport.version=) start
```
</TabItem>
<TabItem label="Helm Chart" scopes={["oss", "enterprise", "cloud"]}>
```code
$ helm install teleport-plugin-jira teleport/teleport-plugin-jira \
  --values teleport-jira-helm.yaml \
  --version (=teleport.plugin.version=)
```
</TabItem>
</Tabs>

The log output should look familiar to what Teleport service logs. You should see that it connected to Teleport, and is listening for new Teleport requests and Jira webhooks.

Go ahead and test it:

```code
$ tsh login --request-roles=admin
```

That should create a new permission request on Teleport (you can test if it did with `tctl request ls`), and you should see a new task on your Jira project board.

### Set up systemd

In production, we recommend starting the Teleport plugin daemon via an init system like systemd.
Here's the recommended Teleport plugin service unit file for systemd:

```txt
(!examples/systemd/plugins/teleport-jira.service!)
```

Save this as `teleport-jira.service`. Make sure the `teleport-jira start` command includes a `--config` flag that refers to the configuration file you created earlier.

## Audit log

The plugin will let anyone with access to the Jira board approve/deny requests so it's
important to review Teleport's audit log.

## Next steps

To see all of the options available to you when using the Helm chart for the
Teleport Jira plugin, consult our [reference
guide](../../reference/helm-reference/teleport-plugin-jira.mdx).
